---
import type { Page } from "astro";
import type { CollectionEntry } from "astro:content";
import IconArrowLeft from "@/assets/icons/IconArrowLeft.svg";
import IconArrowRight from "@/assets/icons/IconArrowRight.svg";
import LinkButton from "./LinkButton.astro";

type Props = {
  page: Page<CollectionEntry<"blog">>;
};

const { page } = Astro.props;
---

{
  page.lastPage > 1 && (
    <nav
      class="mt-12 mb-8 flex items-center justify-center gap-4"
      role="navigation"
      aria-label="Pagination Navigation"
    >
      <LinkButton
        disabled={!page.url.prev}
        href={page.url.prev as string}
        class:list={[
          "pagination-btn select-none group/btn",
          { "opacity-50 pointer-events-none": !page.url.prev }
        ]}
        aria-label="Goto Previous Page"
      >
        <span class="btn-icon-wrapper">
          <IconArrowLeft class="size-4.5 transition-transform duration-300 group-hover/btn:-translate-x-0.5" />
        </span>
      </LinkButton>
      
      <div class="pagination-info select-none">
        <span class="font-semibold text-foreground">{page.currentPage}</span> 
        <span class="text-foreground/40 mx-1">/</span> 
        <span class="text-foreground/70">{page.lastPage}</span>
      </div>

      <LinkButton
        disabled={!page.url.next}
        href={page.url.next as string}
        class:list={[
          "pagination-btn select-none group/btn",
          { "opacity-50 pointer-events-none": !page.url.next }
        ]}
        aria-label="Goto Next Page"
      >
        <span class="btn-icon-wrapper">
          <IconArrowRight class="size-4.5 transition-transform duration-300 group-hover/btn:translate-x-0.5" />
        </span>
      </LinkButton>
    </nav>
  )
}

<style>
  .pagination-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.75rem;
    height: 2.75rem;
    border-radius: 0.85rem;
    background: color-mix(in srgb, var(--background) 60%, transparent);
    border: 1px solid color-mix(in srgb, var(--border) 40%, transparent);
    color: var(--foreground);
    backdrop-filter: blur(12px);
    transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 4px 10px -4px rgba(0, 0, 0, 0.1);
  }

  .pagination-btn:hover:not(.opacity-50) {
    color: var(--accent);
    border-color: color-mix(in srgb, var(--accent) 30%, transparent);
    background: color-mix(in srgb, var(--accent) 8%, transparent);
    transform: translateY(-2px);
    box-shadow: 
      0 8px 20px -6px color-mix(in srgb, var(--accent) 20%, transparent),
      0 0 0 1px color-mix(in srgb, var(--accent) 10%, transparent);
  }

  .pagination-btn:active:not(.opacity-50) {
    transform: translateY(0) scale(0.96);
    box-shadow: 0 2px 5px -2px color-mix(in srgb, var(--accent) 30%, transparent);
  }

  .btn-icon-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .pagination-info {
    font-family: var(--font-cartograph), monospace;
    font-size: 0.85rem;
    padding: 0.5rem 1rem;
    border-radius: 0.75rem;
    background: color-mix(in srgb, var(--foreground) 3%, transparent);
    border: 1px dashed color-mix(in srgb, var(--border) 40%, transparent);
    letter-spacing: 0.05em;
  }
</style>
